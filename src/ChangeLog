2002-06-21  Joe Shaw  <joe@ximian.com>

	* rcmain.py (main): If we don't get the HTTP error code or XML-RPC
	fault code we want, don't raise a new exception, just call "raise"
	with no arguments and it'll re-raise the current exception, stack
	trace and all.

	* rcpackagecmds.py (find_package_in_channel): Handle fault code
	-601 from the daemon: cannot find package.
	(PackageInstallCmd.execute, PackageRemoveCmd.execute): Show the
	list of packages we explicitly requested in --verbose mode.

2002-06-21  Joe Shaw  <joe@ximian.com>

	* rcmain.py: Split out all of the stuff in rc.in into here.

	* rc.in: Just a shell around rcmain.main() now.

	* rcpackagecmds.py (PackageInstallCmd): Add --allow-removals to
	the local_opt_table and disallow removals on a no-confirmation
	install unless it is set.
	(PackageUpdateCmd.execute): Show the list of packages to be
	upgraded.  Disallow removals on no-confirmation unless
	-d/--allow-removals is set.

2002-06-20  Joe Shaw  <joe@ximian.com>

	* rc.in: Handle XML-RPC and HTTP authentication errors and pass
	through all others, as they should have been handled before then.

2002-06-19  Jon Trowbridge  <trow@ximian.com>

	* rcpackagecmds.py (PackageSearchCmd.local_opt_table): Added
	"installed-only" and "uninstalled-only" options.
	(PackageSearchCmd.execute): Filter our list of packages
	appropriately if the --installed-only or --uninstalled-only
	options are set.
	(transact_and_poll): Present the user with nicer status messages
	during downloads.

	* rctalk.py (message_status): Added.  Uses some escape-code magic
	to do status messages that don't advance to the next line.
	(message_finished): Added.  Use this to print a final status message
	and advance the line as usual.

	* rcformat.py (pending_to_str): Added.  Converts a 'pending
	status' item into a human-readable string.

2002-06-18  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (PackageUpdateCmd): Added.  Gets a list of
	updates from the server and performs an update.
	(PackageInstallCmd, PackageRemoveCmd): Add confirmation by default
	and handle -y/--no-confirmation.

2002-06-17  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (PackageInstallCmd, PackageRemoveCmd): Get
	required dependencies from the daemon and display them
	apt-get-like and proceed with the transaction.

2002-06-17  Jon Trowbridge  <trow@ximian.com>

	* rclogcmds.py: Added.  A primitive log list/query command.

2002-06-14  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (PackageInfoCmd): Added.  Shows some detailed
	package info, like rpm -qi

2002-06-14  Joe Shaw  <joe@ximian.com>

	* rcformat.py (evr_to_str, evr_to_abbrev_str): Changed to take a
	package instead of an EVR triple.
	(display_version): Remove, replaced by the above two.

	* rcpackagecmds.py (append_to_table): Abbreviate the version and
	channel name.
	(sort_and_format_table): lower() the strings, also sort by channel
	name after package name.
	(PackageListCmd, PackageSearchCmd): Take --no-abbrev.
	(PackageListCmd.execute): Accept "all" to list packages in all
	channels.
	(PackageUpdatesCmd.execute): Update the evr_fn() call.

2002-06-14  Joe Shaw  <joe@ximian.com>

	* rcformat.py (transaction_status): Added.  Takes the messages
	from the daemon and outputs a human-readable string.

	* rcpackagecmds.py (transact_and_poll): Only show download status
	if --verbose is set.

2002-06-12  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py: Change calls of rcd.packsys.query() to
	rcd.packsys.search() to match the design doc.

2002-06-12  Jon Trowbridge  <trow@ximian.com>

	* rcpackagecmds.py (PackageUpdatesCmd): General hacking.

	* rcchannelcmds.py (check_subscription_by_id): Added.
	(get_channels_by_name): Check channel initials both with and
	without the "."=>" " substitution.  That way "Red Hat Linux 7.2"
	matches "rhl72" but "Gnome 2.0 Development Snapshots" matches the
	more natural "g2ds".

	* rcformat.py (evr_to_str): Added.  Convert EVR to a string.
	(evr_to_abbrev_str): Added.  Convert EVR to a string, converting those big
	snapshot versions into a timestamp.
	(abbrev_channel_name): Moved from rcchannelcmds.py.
	(abbrev_importance): Added.

2002-06-12  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (PackageRemoveCmd): Added.
	(transact_and_poll): Move the bulk of the transaction code into
	here.

2002-06-12  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (PackageInstallCmd.execute): Poll on the
	transaction ID so we can get status on the install.

2002-06-11  Joe Shaw  <joe@ximian.com>

	* rc: Comment out catching the xmlrpclib faults, as we probably
	want to see what they actually are for now.

	* rcpackagecmds.py (find_package): Fix to get the package either
	from a specific channel or to just get the latest matching the name.

2002-06-11  Jon Trowbridge  <trow@ximian.com>

	* rcpackagecmds.py (PackageUpdatesCmd): Added.  A command
	for listing pending updates.

	* rcchannelcmds.py (abbrev_channel_name): Added.  A little
	function to shorten channel names.

2002-06-11  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (install_indicator): Get rid of the global
	package cache, it's no longer necessary, this speeds package
	listing and searching a ton.
	(append_to_table, sort_and_format_table): If rctalk.be_terse is
	set, always specify the	channel ID (for ease in scripting)
	(PackageSearchCmd.local_opt_table): Drop the "search-updates"
	switch from the	list.
	(PackageSearchCmd.execute): Allow a channel (or "all") to be
	specified with the -c option.  If not presented, search system
	packages.  Use the append_to_table() and sort_and_format_table()
	functions.

2002-06-11  Jon Trowbridge  <trow@ximian.com>

	* rcpackagecmds.py (PackageListCmd.execute): Allow channels to be
	specified by name, not just by ID.

2002-06-10  Jon Trowbridge  <trow@ximian.com>

	* rcchannelcmds.py: Support --dry-run.

	* rcsystemcmds.py:  Added.  Currenly only contains the "ping"
	command.

	* rc: Added arg-processing magic to support for --terse,
	--read-from-file, --read-from-stdin and the RC_ARGS environment
	variable.

	* rccommand.py (default_opt_table): Added --read-from-file and
	--read-from-stdin.

	* rcformat.py: Format our tables without headers or excess
	whitespace if the be_terse flag is set.

	* rctalk.py: Added the be_terse flag.

2002-06-10  Joe Shaw  <joe@ximian.com>

	* rcformat.py (display_version): Added.  Outputs a correctly
	formatted version.

	* rcpackagecmds.py: Use rcformat.display_version() throughout
	(find_package): Added.  Does a query based on a package name and
	optional channel.
	(PackageInstallCmd): Added.  Incomplete and kind of broken.

2002-06-10  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (PackageListCmd): If no channels are specified,
	list the system packages.  Only show the "channel" field if there
	is more than one channel specified.

2002-06-10  Joe Shaw  <joe@ximian.com>

	* rcchannelcmds.py: Change a print to an rctalk.message

	* rccommand.py: Change the --dry-run shortcut from -n to -N and
	verbose's -v to -V so they don't conflict with other options.

	* rcpackagecmds.py: Use rctalk, add a first-cut PackageSearchCmd.

2002-06-10  Jon Trowbridge  <trow@ximian.com>

	* rcchannelcmds.py: Added smarter name-based channel matching,
	replace prints with rctalk functions.

	* rc: Implement the --debug, --quiet, --verbose options.  Replace
	a bunch of prints with calls to rctalk.message, rctalk.warning,
	etc.

	* rccommand.py (default_opt_table): Added --quiet option.

	* rcformat.py (linebreak): Added.

	* rctalk.py: Added.  An interface for printing messages, which we
	should use instead of littering the code with prints.

2002-06-10  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py (install_indicator): Get the system packages
	from the daemon so we can show if each package is installed on the
	system.

2002-06-07  Joe Shaw  <joe@ximian.com>

	* rcpackagecmds.py: Added.  Supports listing of packages in a channel.
	Doesn't do installed packages yet.

2002-06-07  Joe Shaw  <joe@ximian.com>

	* rc: Handle cases like "rc -U channels refresh 20001" in which
	"channels" could get picked up as the action instead of "refresh".

	* rcchannelcmds.py: Pulled the default_opt_table out of the
	RCCommand class so we could walk it, for the above.

2002-06-07  Joe Shaw  <joe@ximian.com>

	* All files: Change the license to explicitly require version 2 of
	the GPL.

	* rcchannelcmds.py (RefreshChannelCmd): Added, refreshes all of
	the channels on the system or a specified channel.

2002-06-07  Jon Trowbridge  <trow@ximian.com>

	* rc: Print usage info if --help or -? is passed on the command
	line.  Small option-handling clean-ups.  Added license.

	* rcformat.py (opt_table): Added.  Generates a formated description
	of a list of command options.  Added license.

	* rccommand.py: Changed command registration slightly.  Hacked
	construct to accept unambiguous partial matches (i.e. "sub"
	for "subscribe").  Added usage method to RCCommand.  Moved
	default options into an RCCommand method.  Added license.

	* rcchannelcmds.py: Added support for more options, improved
	error handling.  Added license.

